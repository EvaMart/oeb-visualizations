function normalizeComponent(e,t,r,a,n,i,o,s,l,u){"boolean"!=typeof o&&(l=s,s=o,o=!1);var c="function"==typeof r?r.options:r;e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,n&&(c.functional=!0)),a&&(c._scopeId=a);var _;if(i?(_=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=_):t&&(_=o?function(){t.call(this,u(this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),_)if(c.functional){var d=c.render;c.render=function(e,t){return _.call(t),d(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,_):[_]}return r}import Plotly from"plotly.js-dist";for(var moment=require("moment"),dates=[],i=0;i<30;i++){var date=moment().add(i,"days").format("YYYY-MM-DD");dates.push(date)}dates.sort(function(e,t){return e.localeCompare(t)}),console.log(dates);for(var numbers=[],status=[],i$1=0;i$1<30;i$1++){var number=Math.floor(81*Math.random())+20;number>30&&number<90?status.push("up"):number>=90?(status.push("NA"),number=null):(status.push("down"),number=null),numbers.push(number)}var data={date:dates,uptime:numbers,status:status},script={name:"accessibilityPlot",mounted:function(){var e=this.buildTimeTraces(data);e=e.concat(this.buildBarTraces(data));var t=data.uptime.filter(function(e){return null!==e}),r=t.reduce(function(e,t){return e+t},0)/t.length,a=new Date(data.date[0]);a.setDate(a.getDate()-1);var n=new Date(data.date[data.date.length-1]);n.setDate(n.getDate()+1),console.log(r);var i={x:[a,n],y:[r,r],name:"Average access time",showlegend:!0,mode:"lines",type:"scatter",line:{color:"rgba(111, 176, 129,.6)",width:1.5,dash:"4px"},marker:{size:5}};e.push(i);var o={bargap:0,barmode:"stack",showlegend:!0,autosize:!0,height:400,margin:{l:50,r:50,b:70,t:70,pad:4},xaxis:{type:"date",font:{size:8},tickfont:{size:8},tickmode:"linear",tick0:Math.min(data.x),dtick:2592e5,tickangle:45,tickformat:"%d %b",ticklabelmode:"period"},yaxis:{title:"Access time (ms)",titlefont:{size:10},tickfont:{size:8}},template:"plotly_white",legend:{orientation:"h",yanchor:"bottom",y:1.02,xanchor:"right",x:1,font:{size:8}}};Plotly.newPlot("plot",e,o)},methods:{generateColor:function(e,t){for(var r=[],a=0;a<30;a++)switch(e[a]){case"up":r.push("rgba(218, 247, 223,0)");break;case"down":r.push("rgba(255, 153, 145,"+t+")");break;case"NA":r.push("rgba(204,204,204,"+t+")")}return console.log(r),r},extractSubarraysBetweenNullValues:function(e){for(var t=[],r=[],a=[],n=[],i=0;i<e.uptime.length;i++)null===e.uptime[i]?a.length>0&&(t.push(a),r.push(n),a=[],n=[]):(a.push(e.uptime[i]),n.push(e.date[i]));return a.length>0&&(t.push(a),r.push(n)),{uptime:t,date:r}},buildTimeTraces:function(e){for(var t=this.extractSubarraysBetweenNullValues(e),r=[],a=0;a<t.uptime.length;a++){var n=t.uptime[a],i={x:t.date[a],y:n,name:"Online",legendgroup:"up",showlegend:0===a,mode:"markers+lines",type:"scatter",fill:"tozeroy",fillcolor:"rgba(218, 247, 223,.4)",connectgaps:!1,line:{color:"rgba(111, 176, 129,.8)",width:1.5},marker:{size:5}};r.push(i)}return r},extractSubarraysOfNullValues:function(e,t){for(var r=[],a=0;a<e.uptime.length;a++)null===e.uptime[a]&&e.status[a]===t&&r.push(e.date[a]);return r},buildBarTraces:function(e){var t=[],r=this.extractSubarraysOfNullValues(e,"down");console.log(r);var a=Array(r.length).fill(2).concat(Array(r.length).fill(120)),n=Array(r.length).fill("rgba(255, 153, 145,.8)").concat(Array(r.length).fill("rgba(255, 153, 145,.2)"));r=r.concat(r);var i=this.extractSubarraysOfNullValues(e,"NA"),o=Array(i.length).fill(2).concat(Array(i.length).fill(120)),s=Array(i.length).fill("rgba(204,204,204,.8)").concat(Array(i.length).fill("rgba(204,204,204,.2)"));i=i.concat(i);var l={x:r,y:a,marker:{color:n},name:"Offline",type:"bar"};t.push(l);var u={x:i,y:o,marker:{color:s},name:"No information captured",type:"bar"};return t.push(u),t}}},normalizeComponent_1=normalizeComponent,__vue_script__=script,__vue_render__=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{attrs:{id:"plot"}})},__vue_staticRenderFns__=[],__vue_inject_styles__=void 0,__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1,accessibilityPlot=normalizeComponent_1({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,void 0,void 0);export{accessibilityPlot};
