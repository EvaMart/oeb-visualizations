!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("plotly.js-dist")):"function"==typeof define&&define.amd?define(["exports","plotly.js-dist"],t):(e=e||self,t(e.oeb_visualizations={},e.Plotly))}(this,function(e,t){"use strict";function r(e,t,r,a,n,o,i,l,s,u){"boolean"!=typeof i&&(s=l,l=i,i=!1);var c="function"==typeof r?r.options:r;e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,n&&(c.functional=!0)),a&&(c._scopeId=a);var d;if(o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,s(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=d):t&&(d=i?function(){t.call(this,u(this.$root.$options.shadowRoot))}:function(e){t.call(this,l(e))}),d)if(c.functional){var p=c.render;c.render=function(e,t){return d.call(t),p(e,t)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,d):[d]}return r}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;for(var a=require("moment"),n=[],o=0;o<30;o++){var i=a().add(o,"days").format("YYYY-MM-DD");n.push(i)}n.sort(function(e,t){return e.localeCompare(t)}),console.log(n);for(var l=[],s=[],u=0;u<30;u++){var c=Math.floor(81*Math.random())+20;c>40&&c<90?s.push("up"):c>=90?(s.push("NA"),c=null):(s.push("down"),c=null),l.push(c)}var d={date:n,uptime:l,status:s},p=r({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{attrs:{id:"plot"}})},staticRenderFns:[]},void 0,{name:"accessibilityPlot",mounted:function(){var e=this.buildTimeTraces(d);e=e.concat(this.buildBarTraces(d));var r=d.uptime.filter(function(e){return null!==e}),a=r.reduce(function(e,t){return e+t},0)/r.length,n=new Date(d.date[0]);n.setDate(n.getDate()-1);var o=new Date(d.date[d.date.length-1]);o.setDate(o.getDate()+1),console.log(a);var i={x:[n,o],y:[a,a],name:"Average access time",showlegend:!0,mode:"lines",type:"scatter",line:{color:"rgba(111, 176, 129,.6)",width:1.5,dash:"4px"},marker:{size:5}};e.push(i);var l={bargap:0,barmode:"stack",showlegend:!0,autosize:!0,height:400,margin:{l:50,r:50,b:70,t:70,pad:4},xaxis:{type:"date",font:{size:8},tickfont:{size:8},tickmode:"linear",tick0:Math.min(d.x),dtick:2592e5,tickangle:45,tickformat:"%d %b",ticklabelmode:"period"},yaxis:{title:"Access time (ms)",titlefont:{size:10},tickfont:{size:8}},template:"plotly_white",legend:{orientation:"h",yanchor:"bottom",y:1.02,xanchor:"right",x:1,font:{size:8}}};t.newPlot("plot",e,l)},methods:{generateColor:function(e,t){for(var r=[],a=0;a<30;a++)switch(e[a]){case"up":r.push("rgba(218, 247, 223,0)");break;case"down":r.push("rgba(255, 153, 145,"+t+")");break;case"NA":r.push("rgba(204,204,204,"+t+")")}return console.log(r),r},extractSubarraysBetweenNullValues:function(e){for(var t=[],r=[],a=[],n=[],o=0;o<e.uptime.length;o++)null===e.uptime[o]?a.length>0&&(t.push(a),r.push(n),a=[],n=[]):(a.push(e.uptime[o]),n.push(e.date[o]));return a.length>0&&(t.push(a),r.push(n)),{uptime:t,date:r}},buildTimeTraces:function(e){for(var t=this.extractSubarraysBetweenNullValues(e),r=[],a=0;a<t.uptime.length;a++){var n=t.uptime[a],o={x:t.date[a],y:n,name:"Online",legendgroup:"up",showlegend:0===a,mode:"markers+lines",type:"scatter",fill:"tozeroy",fillcolor:"rgba(218, 247, 223,.4)",connectgaps:!1,line:{color:"rgba(111, 176, 129,.8)",width:1.5},marker:{size:5}};r.push(o)}return r},extractSubarraysOfNullValues:function(e,t){for(var r=[],a=0;a<e.uptime.length;a++)null===e.uptime[a]&&e.status[a]===t&&r.push(e.date[a]);return r},buildBarTraces:function(e){var t=[],r=this.extractSubarraysOfNullValues(e,"down");console.log(r);var a=Array(r.length).fill(2).concat(Array(r.length).fill(120)),n=Array(r.length).fill("rgba(255, 153, 145,.8)").concat(Array(r.length).fill("rgba(255, 153, 145,.2)"));r=r.concat(r);var o=this.extractSubarraysOfNullValues(e,"NA"),i=Array(o.length).fill(2).concat(Array(o.length).fill(120)),l=Array(o.length).fill("rgba(204,204,204,.8)").concat(Array(o.length).fill("rgba(204,204,204,.2)"));o=o.concat(o);var s={x:r,y:a,marker:{color:n},name:"Offline",type:"bar"};t.push(s);var u={x:o,y:i,marker:{color:l},name:"No information captured",type:"bar"};return t.push(u),t}}},void 0,!1,void 0,void 0,void 0);e.accessibilityPlot=p,Object.defineProperty(e,"__esModule",{value:!0})});
